{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"../Utilities/infoLog","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":13,"column":16},"end":{"line":13,"column":47}}],"key":"JOQiliPDxvxpS4qCtoh0JoUHvB4=","exportNames":["*"],"imports":1}},{"name":"invariant","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":14,"column":18},"end":{"line":14,"column":38}}],"key":"oQpL0Es3H146KnQH9ygFeHrzVP4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){'use strict';function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return s}});var t=e(r(d[0])),u=e(r(d[1])),n=(r(d[2]).default,r(d[3])),s=(function(){return(0,u.default)(function e(u){var n=u.onMoreTasks;(0,t.default)(this,e),this._onMoreTasks=n,this._queueStack=[{tasks:[],popable:!1}]},[{key:\"enqueue\",value:function(e){this._getCurrentQueue().push(e)}},{key:\"enqueueTasks\",value:function(e){var t=this;e.forEach(function(e){return t.enqueue(e)})}},{key:\"cancelTasks\",value:function(e){this._queueStack=this._queueStack.map(function(t){return Object.assign({},t,{tasks:t.tasks.filter(function(t){return-1===e.indexOf(t)})})}).filter(function(e,t){return e.tasks.length>0||0===t})}},{key:\"hasTasksToProcess\",value:function(){return this._getCurrentQueue().length>0}},{key:\"processNext\",value:function(){var e=this._getCurrentQueue();if(e.length){var t=e.shift();try{'object'==typeof t&&t.gen?this._genPromise(t):'object'==typeof t&&t.run?t.run():(n('function'==typeof t,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(t,null,2)),t())}catch(e){throw e.message='TaskQueue: Error with task '+(t.name||'')+': '+e.message,e}}}},{key:\"_getCurrentQueue\",value:function(){var e=this._queueStack.length-1,t=this._queueStack[e];return t.popable&&0===t.tasks.length&&this._queueStack.length>1?(this._queueStack.pop(),this._getCurrentQueue()):t.tasks}},{key:\"_genPromise\",value:function(e){var t=this;this._queueStack.push({tasks:[],popable:!1});var u=this._queueStack.length-1,n=this._queueStack[u];e.gen().then(function(){n.popable=!0,t.hasTasksToProcess()&&t._onMoreTasks()}).catch(function(t){setTimeout(function(){throw t.message=`TaskQueue: Error resolving Promise in task ${e.name}: ${t.message}`,t},0)})}}])})()});","lineCount":1,"map":[[1,29,11,0],[1,42,11,13],[1,51,11,13,"_interopDefault"],[1,53,11,13,"e"],[1,56,11,13],[1,63,11,13,"e"],[1,68,11,13,"__esModule"],[1,79,11,13,"e"],[1,81,11,13],[1,82,11,13,"default"],[1,90,11,13,"e"],[1,92,11,13],[1,93,11,13,"Object"],[1,100,11,13,"defineProperty"],[1,115,11,13,"_e"],[1,118,11,13],[1,132,11,13,"value"],[1,139,11,13],[1,143,183,0,"Object"],[1,150,183,0,"defineProperty"],[1,165,183,0,"_e"],[1,168,183,0],[1,179,183,0,"enumerable"],[1,191,183,0],[1,193,183,0,"get"],[1,197,183,0],[1,215,183,0,"_default"],[1,216,183,0],[1,220,183,25],[1,224,183,25,"_classCallCheck"],[1,226,183,25,"_interopDefault"],[1,228,183,25,"r"],[1,230,183,25,"d"],[1,232,183,25],[1,237,183,25,"_createClass"],[1,239,183,25,"_interopDefault"],[1,241,183,25,"r"],[1,243,183,25,"d"],[1,245,183,25],[1,250,14,6,"invariant"],[1,253,13,16,"require"],[1,255,13,23,"d"],[1,257,13,23],[1,261,13,48,"default"],[1,269,14,18,"require"],[1,271,14,25,"d"],[1,273,14,25],[1,278,183,0,"_default"],[1,281,44,15],[1,292,55,3],[1,301,55,3,"_createClass"],[1,303,55,3,"default"],[1,312,52,2],[1,321,52,2,"TaskQueue"],[1,323,52,2,"_ref"],[1,326,52,61],[1,330,52,15,"onMoreTasks"],[1,332,52,26,"_ref"],[1,334,52,15,"onMoreTasks"],[1,347,52,26],[1,349,52,26,"_classCallCheck"],[1,351,52,26,"default"],[1,360,52,26,"this"],[1,365,52,26,"TaskQueue"],[1,368,53,4,"this"],[1,373,53,9,"_onMoreTasks"],[1,386,53,24,"onMoreTasks"],[1,388,54,4,"this"],[1,393,54,9,"_queueStack"],[1,405,54,23],[1,406,54,24],[1,407,54,25,"tasks"],[1,413,54,32],[1,416,54,36,"popable"],[1,425,54,45],[1,428,55,2],[1,430,55,3],[1,432,55,3,"key"],[1,436,55,3],[1,446,55,3,"value"],[1,452,62,2],[1,461,62,10,"task"],[1,464,63,4,"this"],[1,469,63,9,"_getCurrentQueue"],[1,488,63,28,"push"],[1,493,63,33,"task"],[1,495,64,2],[1,498,64,3],[1,499,64,3,"key"],[1,503,64,3],[1,518,64,3,"value"],[1,524,66,2],[1,533,66,15,"tasks"],[1,536,66,41],[1,540,66,41,"_this"],[1,542,66,41,"this"],[1,547,67,4,"tasks"],[1,549,67,10,"forEach"],[1,557,67,18],[1,566,67,18,"task"],[1,569,67,22],[1,576,67,26,"_this"],[1,578,67,31,"enqueue"],[1,586,67,39,"task"],[1,588,67,44],[1,590,68,2],[1,593,68,3],[1,594,68,3,"key"],[1,598,68,3],[1,612,68,3,"value"],[1,618,70,2],[1,627,70,14,"tasksToCancel"],[1,630,72,4,"this"],[1,635,72,9,"_queueStack"],[1,647,72,23,"this"],[1,652,72,28,"_queueStack"],[1,664,73,7,"map"],[1,668,73,11],[1,677,73,11,"queue"],[1,680,73,16],[1,687,73,16,"Object"],[1,694,73,16,"assign"],[1,701,73,16],[1,704,74,11,"queue"],[1,706,74,16],[1,707,75,8,"tasks"],[1,713,75,15,"queue"],[1,715,75,21,"tasks"],[1,721,75,27,"filter"],[1,728,75,34],[1,737,75,34,"task"],[1,740,75,38],[1,747,75,69],[1,751,75,42,"tasksToCancel"],[1,753,75,56,"indexOf"],[1,761,75,64,"task"],[1,763,75,76],[1,767,75,77],[1,770,77,7,"filter"],[1,777,77,14],[1,786,77,15,"queue"],[1,788,77,22,"idx"],[1,791,77,25],[1,798,77,30,"queue"],[1,800,77,36,"tasks"],[1,806,77,42,"length"],[1,813,77,51],[1,816,77,64],[1,820,77,56,"idx"],[1,821,77,65],[1,823,78,2],[1,826,78,3],[1,827,78,3,"key"],[1,831,78,3],[1,851,78,3,"value"],[1,857,90,2],[1,868,91,4],[1,875,91,11,"this"],[1,880,91,16,"_getCurrentQueue"],[1,899,91,35,"length"],[1,906,91,44],[1,907,92,2],[1,910,92,3],[1,911,92,3,"key"],[1,915,92,3],[1,929,92,3,"value"],[1,935,97,2],[1,946,98,4],[1,950,98,10,"queue"],[1,952,98,18,"this"],[1,957,98,23,"_getCurrentQueue"],[1,976,99,4],[1,979,99,8,"queue"],[1,981,99,14,"length"],[1,988,99,22],[1,989,100,6],[1,993,100,12,"task"],[1,995,100,19,"queue"],[1,997,100,25,"shift"],[1,1005,101,6],[1,1009,102,28],[1,1026,102,19,"task"],[1,1029,102,40,"task"],[1,1031,102,45,"gen"],[1,1035,104,10,"this"],[1,1040,104,15,"_genPromise"],[1,1052,104,27,"task"],[1,1055,105,35],[1,1072,105,26,"task"],[1,1075,105,47,"task"],[1,1077,105,52,"run"],[1,1081,107,10,"task"],[1,1083,107,15,"run"],[1,1090,109,10,"invariant"],[1,1092,110,28],[1,1111,110,19,"task"],[1,1113,111,12],[1,1173,112,14,"JSON"],[1,1178,112,19,"stringify"],[1,1188,112,29,"task"],[1,1190,112,35],[1,1195,112,41],[1,1199,115,10,"task"],[1,1203,117,6],[1,1204,117,8],[1,1210,117,15,"e"],[1,1213,121,8],[1,1219,118,8,"e"],[1,1221,118,10,"message"],[1,1229,120,10],[1,1260,120,43,"task"],[1,1262,120,48,"name"],[1,1268,120,56],[1,1272,120,62],[1,1277,120,69,"e"],[1,1279,120,71,"message"],[1,1287,121,14,"e"],[1,1288,122,6],[1,1289,123,4],[1,1290,124,2],[1,1293,124,3],[1,1294,124,3,"key"],[1,1298,124,3],[1,1317,124,3,"value"],[1,1323,133,2],[1,1334,134,4],[1,1338,134,10,"stackIdx"],[1,1340,134,21,"this"],[1,1345,134,26,"_queueStack"],[1,1357,134,38,"length"],[1,1364,134,47],[1,1366,135,10,"queue"],[1,1368,135,18,"this"],[1,1373,135,23,"_queueStack"],[1,1385,135,35,"stackIdx"],[1,1388,136,4],[1,1395,137,6,"queue"],[1,1397,137,12,"popable"],[1,1406,138,29],[1,1410,138,6,"queue"],[1,1412,138,12,"tasks"],[1,1418,138,18,"length"],[1,1426,139,6,"this"],[1,1431,139,11,"_queueStack"],[1,1443,139,23,"length"],[1,1450,139,32],[1,1453,141,6,"this"],[1,1458,141,11,"_queueStack"],[1,1470,141,23,"pop"],[1,1476,147,13,"this"],[1,1481,147,18,"_getCurrentQueue"],[1,1501,149,13,"queue"],[1,1503,149,19,"tasks"],[1,1508,151,2],[1,1511,151,3],[1,1512,151,3,"key"],[1,1516,151,3],[1,1530,151,3,"value"],[1,1536,153,2],[1,1545,153,14,"task"],[1,1548,153,33],[1,1552,153,33,"_this2"],[1,1554,153,33,"this"],[1,1559,158,4,"this"],[1,1564,158,9,"_queueStack"],[1,1576,158,21,"push"],[1,1581,158,26],[1,1582,158,27,"tasks"],[1,1588,158,34],[1,1591,158,38,"popable"],[1,1600,158,47],[1,1604,159,4],[1,1608,159,10,"stackIdx"],[1,1610,159,21,"this"],[1,1615,159,26,"_queueStack"],[1,1627,159,38,"length"],[1,1634,159,47],[1,1636,160,10,"stackItem"],[1,1638,160,22,"this"],[1,1643,160,27,"_queueStack"],[1,1655,160,39,"stackIdx"],[1,1658,163,4,"task"],[1,1660,164,7,"gen"],[1,1666,165,7,"then"],[1,1671,165,12],[1,1682,171,8,"stackItem"],[1,1684,171,18,"popable"],[1,1693,171,28],[1,1695,172,8,"_this2"],[1,1697,172,13,"hasTasksToProcess"],[1,1718,172,36,"_this2"],[1,1720,172,41,"_onMoreTasks"],[1,1734,173,6],[1,1737,174,7,"catch"],[1,1743,174,13],[1,1752,174,13,"ex"],[1,1755,175,8,"setTimeout"],[1,1766,175,19],[1,1777,177,10],[1,1783,176,10,"ex"],[1,1785,176,13,"message"],[1,1793,176,23],[1,1839,176,69,"task"],[1,1841,176,74,"name"],[1,1850,176,83,"ex"],[1,1852,176,86,"message"],[1,1862,177,16,"ex"],[1,1863,178,8],[1,1865,178,11],[1,1867,179,6],[1,1869,180,2],[1,1873,180,3],[1,1875,44,15],[1,1877,183,25],[1,1880]],"functionMap":{"names":["<global>","TaskQueue","constructor","enqueue","enqueueTasks","tasks.forEach$argument_0","cancelTasks","_queueStack.map$argument_0","queue.tasks.filter$argument_0","_queueStack.map.filter$argument_0","hasTasksToProcess","processNext","_getCurrentQueue","_genPromise","task.gen.then$argument_0","task.gen.then._catch$argument_0","setTimeout$argument_0"],"mappings":"AAA;AC2C;ECQ;GDG;EEO;GFE;EGE;kBCC,0BD;GHC;EKE;WCG;kCCE,0CD;QDC;cGC,mDH;GLC;ESY;GTE;EUK;GV2B;EWS;GXkB;EYE;YCY;ODQ;aEC;mBCC;SDG;OFC;GZC;CDC"},"hasCjsExports":false},"type":"js/module"}]}